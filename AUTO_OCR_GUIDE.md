# 自动OCR功能使用指南

## 概述

自动OCR功能可以在您停止绘画一段时间后，自动进行OCR初始化和识别，无需手动点击按钮。这个功能特别适合连续书写多个数学表达式的场景，系统会自动检测并分析您的手写内容。

## 工作原理

自动OCR系统通过以下步骤工作：

1. **监控用户活动**：系统持续监控画布上的编辑活动
2. **检测闲置时间**：当用户停止绘画/编辑一段时间后（默认1分钟）
3. **自动选择区域**：使用当前选中的区域作为OCR识别目标
4. **两阶段处理**：
   - 第一阶段：自动初始化OCR环境（加载图片元素）
   - 第二阶段：执行OCR识别和错误分析

## 使用方法

### 基本步骤

1. 在画布上绘制您的手写内容
2. 选中包含手写内容的区域
3. 停止编辑，等待设定的时间（默认1分钟）
4. 系统会自动进行OCR识别，并标记出错误

### 设置选项

在界面右侧的工具栏中，您可以找到自动OCR设置：

- **自动OCR开关**：启用或禁用自动OCR功能
- **等待时间**：设置系统等待多长时间才开始自动OCR处理
  - 10秒：快速反馈，适合测试
  - 30秒：较短的等待时间
  - 1分钟：默认设置，平衡等待时间和用户体验
  - 2分钟：较长的等待时间，适合复杂内容
  - 5分钟：长等待时间，适合长时间编辑

### 状态指示器

屏幕左下角会显示一个状态指示器，帮助您了解自动OCR系统的当前状态：

- **灰色**：自动OCR已禁用
- **绿色**：自动OCR已启用，正在等待用户停止编辑
- **黄色**：正在进行OCR处理
- **倒计时**：显示剩余等待时间

## 最佳实践

1. **选区准确性**：确保选区准确包含您想要识别的手写内容
2. **等待时间设置**：
   - 简单内容使用较短等待时间（30秒）
   - 复杂内容使用较长等待时间（2-5分钟）
3. **连续工作流**：
   - 完成一个表达式后，选中该区域
   - 移动到新区域继续书写
   - 系统会自动处理之前选中的区域

## 技术细节

自动OCR处理器使用与手动OCR相同的两阶段机制：

1. **初始化阶段**：
   - 截取选区图像
   - 创建和设置图片DOM元素
   - 等待图片完全加载
   - 保存初始化数据

2. **识别阶段**：
   - 使用已初始化的数据进行OCR识别
   - 分析手写错误
   - 标记错误并显示建议
   - 朗读错误分析结果（如果启用TTS）

## 故障排除

如果自动OCR不按预期工作：

1. **确认选区**：检查是否有内容被选中
2. **检查状态指示器**：确认自动OCR是否启用
3. **重置处理**：如果处理卡住，可以禁用然后重新启用自动OCR
4. **手动触发**：如果自动处理失败，可以使用手动OCR按钮

## 注意事项

- 自动OCR功能会在后台监控用户活动，可能会略微增加系统资源使用
- 选区必须包含有效的手写内容才能进行识别
- 处理大型或复杂的手写内容可能需要更长时间 